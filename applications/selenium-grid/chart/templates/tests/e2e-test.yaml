apiVersion: v1
kind: Pod
metadata:
  name: e2e-test
  annotations:
    "helm.sh/hook": test
    argocd.argoproj.io/hook: PostSync
    argocd.argoproj.io/hook-delete-policy: HookSucceeded
    argocd.argoproj.io/sync-wave: "50"
spec:
  containers:
    - name: marinera-e2e
      image: quay.io/ernesgonzalez33/marinera-e2e
      env:
      - name: REMOTE_DRIVER_URL
        value: {{ .Values.testValues.remoteDriverUrl }}
      - name: GRAFANA_URL
        value: {{ .Values.testValues.grafanaUrl }}
      - name: BROKER_URL
        value: {{ .Values.testValues.brokerUrl }}
      - name: QUANTUM_LEAP_URL
        value: {{ .Values.testValues.quantumLeapUrl }}
      - name: TEST_TENANT
        value: {{ .Values.testValues.testTenant }}
      - name: GRAFANA_USERNAME
        value: {{ .Values.testValues.grafanaUsername }}
      - name: GRAFANA_PASSWORD
        value: {{ .Values.testValues.grafanaPassword }}
      command: ['mvn', 'test']
  restartPolicy: Never