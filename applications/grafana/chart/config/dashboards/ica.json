{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": {
          "limit": 100,
          "matchAny": false,
          "tags": [],
          "type": "dashboard"
        },
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": 5,
  "iteration": 1652878485823,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "datasource": {
        "type": "datasource",
        "uid": "grafana"
      },
      "gridPos": {
        "h": 4,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 2,
      "options": {
        "content": "<style>\n\n.dashboard-header {\n  background: #0971b8;\n  width: 100%;\n  height: 120px;\n  font-family: \"Arial\"!important;\n  font-weight: 700!important;\n  text-align: left\n}\n\n.dashboard-header-left {\n  width: calc(100% - 450px);\n  height: 120px;\n  float: left;\n}\n\n.dashboard-header-right {\n  width: 450px;\n  height: 120px;\n  float: right;\n  background: #fff;\n  text-align: center;\n}\n\n.dashboard-header-right img {\n  height: 100px;\n  width: auto;\n  margin: 10px auto;\n}\n\n.dashboard-header-left-left {\n  width: calc(100% - 250px);\n  height: 120px;\n  float: left;\n}\n\n.dashboard-header-left-right {\n  width: 250px;\n  height: 120px;\n  float: right;\n}\n\n.dashboard-title {\n  width: 100%;\n  height: 120px;\n}\n\n.dashboard-subtitle {\n  width: 100%;\n  height: 40px;\n}\n\n.dashboard-title h1 {\n  margin: 5px 0 0 20px;\n  color: #fff;\n  font-size: 48px;\n  line-height: 120px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  float: left;\n}\n\n.dashboard-subtitle span {\n  margin: 0 0 0 20px;\n  color: #fff;\n  display: block;\n  font-family: 'Roboto',Helvetica Neue,Arial,sans-serif;\n  font-size: 16px;\n  line-height: 30px;\n  border: none !important;\n  padding: 0 !important;\n}\n  \n.back-container-text {\n  height: 120px;\n  width: calc(100% - 70px);\n  text-align: right;\n  float: left;\n  font-family: 'Roboto',Helvetica Neue,Arial,sans-serif;\n  font-size: 16px;\n}\n\n.back-container-text h5 {\n  line-height: 120px;\n  color: #fff;\n}\n\n.back-container-icon {\n  width: 50px;\n  height: 50px;\n  background: #fff;\n  border-radius: 50%;\n  text-align: center;\n  float: right;\n  margin: 35px 10px;\n  transition: 0.3s ease all;\n}\n  \n.back-container-icon span {\n  height: 20px;\n  width: auto;\n  line-height: 37px;\n  transition: 0.3s ease all;\n}\n  \na:hover .back-container-icon {\n  background: #edac15;\n}\n\n@media screen and (max-width: 720px) {\n  .dashboard-header-left, .dashboard-header-right {\n    width: 100%;\n    height: 60px;\n    float: none;\n  }\n  \n  .dashboard-header-right img {\n    height: 50px;\n    margin: 5px auto;\n  }\n\n  .dashboard-header-left-left {\n    height: 60px;\n  }\n\n  .dashboard-header-left-right {\n    height: 60px;\n  }\n  \n  .dashboard-title {\n    height: 60px;\n  }\n\n  .dashboard-title h1 {\n    line-height: 60px;\n    font-size: 32px;\n    margin: 5px 0 0 10px;\n  }\n  \n  .back-container-text {\n    height: 60px;\n    display: none;\n  }\n\n  .back-container-text h5 {\n    line-height: 60px;\n  }\n  \n  .back-container-icon {\n    width: 30px;\n    height: 30px;\n    margin: 20px 10px;\n  }\n  \n  .back-container-icon span {\n    line-height: 17px;\n  }\n  \n  .mapcontainer {\n    width: calc(100% - 40px);\n    margin: auto;\n  }\n  \n}\n\n</style>\n\n  <div class=\"dashboard-header\">\n    <div class=\"dashboard-header-left\">\n      <div class=\"dashboard-header-left-left\">\n        <div class=\"dashboard-title\">\n          <h1 style=\"font-weight: 700\">\n            AIR QUALITY INDEX (ICA)\n          </h1>\n        </div>\n      </div>\n      <a href=\"/d/aqapp-home\">\n        <div class=\"dashboard-header-left-right\">\n          <div class=\"back-container-text\">\n          </div>\n          <div class=\"back-container-icon\">\n            <span class=\"fa fa-chevron-left\"></span>\n          </div>\n        </div>\n      </a>\n    </div>\n    <div class=\"dashboard-header-right\">\n      <a href=\"https://hopu.eu/\" target=\"_blank\">\n        <img src=\"https://hopu.eu/wp-content/uploads/2019/12/logo_hopu-large.png\">\n      <a>\n    </div>\n  </div\n",
        "mode": "html"
      },
      "pluginVersion": "8.5.2",
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "grafana"
      },
      "gridPos": {
        "h": 4,
        "w": 5,
        "x": 0,
        "y": 4
      },
      "id": 24,
      "options": {
        "content": "**Dispositivo seleccionado:** $device_name\n",
        "mode": "markdown"
      },
      "pluginVersion": "8.5.2",
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "grafana"
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 5,
        "y": 4
      },
      "id": 26,
      "options": {
        "content": "<div style=\"accent-color: auto;align-content: normal;align-items: normal;align-self: auto;animation-delay: 0s;animation-direction: normal;animation-duration: 0s;animation-fill-mode: none;animation-iteration-count: 1;animation-name: none;animation-play-state: running;animation-timing-function: ease;appearance: none;aspect-ratio: auto;backface-visibility: visible;background-attachment: scroll;background-blend-mode: normal;background-clip: border-box;background-color: rgba(255, 255, 255, 0.8);background-image: none;background-origin: padding-box;background-position-x: 0%;background-position-y: 0%;background-repeat: repeat;background-size: auto;block-size: 120px;border-block-end-color: rgb(85, 85, 85);border-block-end-style: none;border-block-end-width: 0px;border-block-start-color: rgb(85, 85, 85);border-block-start-style: none;border-block-start-width: 0px;border-bottom-color: rgb(85, 85, 85);border-bottom-left-radius: 5px;border-bottom-right-radius: 5px;border-bottom-style: none;border-bottom-width: 0px;border-collapse: separate;border-end-end-radius: 5px;border-end-start-radius: 5px;border-image-outset: 0;border-image-repeat: stretch;border-image-slice: 100%;border-image-source: none;border-image-width: 1;border-inline-end-color: rgb(85, 85, 85);border-inline-end-style: none;border-inline-end-width: 0px;border-inline-start-color: rgb(85, 85, 85);border-inline-start-style: none;border-inline-start-width: 0px;border-left-color: rgb(85, 85, 85);border-left-style: none;border-left-width: 0px;border-right-color: rgb(85, 85, 85);border-right-style: none;border-right-width: 0px;border-spacing: 0px 0px;border-start-end-radius: 5px;border-start-start-radius: 5px;border-top-color: rgb(85, 85, 85);border-top-left-radius: 5px;border-top-right-radius: 5px;border-top-style: none;border-top-width: 0px;bottom: 0px;box-decoration-break: slice;box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 15px 0px;box-sizing: border-box;break-after: auto;break-before: auto;break-inside: auto;caption-side: top;caret-color: rgb(85, 85, 85);clear: both;clip: auto;clip-path: none;clip-rule: nonzero;color: rgb(85, 85, 85);color-interpolation: srgb;color-interpolation-filters: linearrgb;color-scheme: normal;column-count: auto;column-fill: balance;column-gap: normal;column-rule-color: rgb(85, 85, 85);column-rule-style: none;column-rule-width: 0px;column-span: none;column-width: auto;contain: none;content: normal;counter-increment: none;counter-reset: none;counter-set: none;cursor: auto;cx: 0px;cy: 0px;d: none;direction: ltr;display: flex;dominant-baseline: auto;empty-cells: show;fill: rgb(0, 0, 0);fill-opacity: 1;fill-rule: nonzero;filter: none;flex-basis: auto;flex-direction: column;flex-grow: 0;flex-shrink: 1;flex-wrap: nowrap;float: left;flood-color: rgb(0, 0, 0);flood-opacity: 1;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: normal;font-synthesis: weight style small-caps;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;grid-auto-columns: auto;grid-auto-flow: row;grid-auto-rows: auto;grid-column-end: auto;grid-column-start: auto;grid-row-end: auto;grid-row-start: auto;grid-template-areas: none;grid-template-columns: none;grid-template-rows: none;height: 120px;hyphenate-character: auto;hyphens: manual;image-orientation: from-image;image-rendering: auto;ime-mode: auto;inline-size: 195.2px;inset-block-end: 0px;inset-block-start: 0px;inset-inline-end: 0px;inset-inline-start: 0px;isolation: auto;justify-content: normal;justify-items: normal;justify-self: auto;left: 0px;letter-spacing: normal;lighting-color: rgb(255, 255, 255);line-break: auto;line-height: 18px;list-style-image: none;list-style-position: outside;list-style-type: disc;margin-block-end: 10px;margin-block-start: 0px;margin-bottom: 10px;margin-inline-end: 8px;margin-inline-start: 10px;margin-left: 10px;margin-right: 8px;margin-top: 0px;marker-end: none;marker-mid: none;marker-start: none;mask-clip: border-box;mask-composite: add;mask-image: none;mask-mode: match-source;mask-origin: border-box;mask-position-x: 0%;mask-position-y: 0%;mask-repeat: repeat;mask-size: auto;mask-type: luminance;max-block-size: none;max-height: none;max-inline-size: none;max-width: none;min-block-size: 0px;min-height: 0px;min-inline-size: 0px;min-width: 0px;mix-blend-mode: normal;object-fit: fill;object-position: 50% 50%;offset-anchor: auto;offset-distance: 0px;offset-path: none;offset-rotate: auto;opacity: 1;order: 0;outline-color: rgb(85, 85, 85);outline-offset: 0px;outline-style: none;outline-width: 0px;overflow-anchor: auto;overflow-block: visible;overflow-inline: visible;overflow-wrap: normal;overflow-x: visible;overflow-y: visible;overscroll-behavior-block: auto;overscroll-behavior-inline: auto;overscroll-behavior-x: auto;overscroll-behavior-y: auto;padding-block-end: 6px;padding-block-start: 6px;padding-bottom: 6px;padding-inline-end: 8px;padding-inline-start: 8px;padding-left: 8px;padding-right: 8px;padding-top: 6px;paint-order: normal;perspective: none;perspective-origin: 97.6px 60px;pointer-events: auto;position: relative;print-color-adjust: economy;quotes: auto;r: 0px;resize: none;right: 0px;rotate: none;row-gap: normal;ruby-align: space-around;ruby-position: alternate;rx: auto;ry: auto;scale: none;scroll-behavior: auto;scroll-margin-block-end: 0px;scroll-margin-block-start: 0px;scroll-margin-bottom: 0px;scroll-margin-inline-end: 0px;scroll-margin-inline-start: 0px;scroll-margin-left: 0px;scroll-margin-right: 0px;scroll-margin-top: 0px;scroll-padding-block-end: auto;scroll-padding-block-start: auto;scroll-padding-bottom: auto;scroll-padding-inline-end: auto;scroll-padding-inline-start: auto;scroll-padding-left: auto;scroll-padding-right: auto;scroll-padding-top: auto;scroll-snap-align: none;scroll-snap-type: none;scrollbar-color: auto;scrollbar-gutter: auto;scrollbar-width: auto;shape-image-threshold: 0;shape-margin: 0px;shape-outside: none;shape-rendering: auto;stop-color: rgb(0, 0, 0);stop-opacity: 1;stroke: none;stroke-dasharray: none;stroke-dashoffset: 0px;stroke-linecap: butt;stroke-linejoin: miter;stroke-miterlimit: 4;stroke-opacity: 1;stroke-width: 1px;tab-size: 8;table-layout: auto;text-align: start;text-align-last: auto;text-anchor: start;text-combine-upright: none;text-decoration-color: rgb(85, 85, 85);text-decoration-line: none;text-decoration-skip-ink: auto;text-decoration-style: solid;text-decoration-thickness: auto;text-emphasis-color: rgb(85, 85, 85);text-emphasis-position: over right;text-emphasis-style: none;text-indent: 0px;text-justify: auto;text-orientation: mixed;text-overflow: clip;text-rendering: auto;text-shadow: none;text-transform: none;text-underline-offset: auto;text-underline-position: auto;top: 0px;touch-action: auto;transform: none;transform-box: border-box;transform-origin: 97.6px 60px;transform-style: flat;transition-delay: 0s;transition-duration: 0s;transition-property: all;transition-timing-function: ease;translate: none;unicode-bidi: isolate;user-select: auto;vector-effect: none;vertical-align: baseline;visibility: visible;white-space: normal;width: 195.2px;will-change: auto;word-break: normal;word-spacing: 0px;writing-mode: horizontal-tb;x: 0px;y: 0px;z-index: 800;-moz-box-align: stretch;-moz-box-direction: normal;-moz-box-flex: 0;-moz-box-ordinal-group: 1;-moz-box-orient: horizontal;-moz-box-pack: start;-moz-float-edge: content-box;-moz-force-broken-image-icon: 0;-moz-image-region: auto;-moz-orient: inline;-moz-text-size-adjust: auto;-moz-user-focus: none;-moz-user-input: auto;-moz-user-modify: read-only;-moz-window-dragging: default;-webkit-line-clamp: none;-webkit-text-fill-color: rgb(85, 85, 85);-webkit-text-stroke-color: rgb(85, 85, 85);-webkit-text-stroke-width: 0px;\">\n<div style=\"box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: normal;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;line-height: 18px;pointer-events: auto;white-space: nowrap;\"><i style=\"background-attachment: scroll;background-clip: border-box;background-color: rgba(0, 255, 250, 0.6);background-image: none;background-origin: padding-box;background-position-x: 0%;background-position-y: 0%;background-repeat: repeat;background-size: auto;box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;float: left;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: italic;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;height: 18px;line-height: 18px;margin-left: 10px;margin-right: 10px;opacity: 0.7;pointer-events: auto;white-space: nowrap;width: 18px;\"></i> Good</div>\n<div class=\"box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: normal;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;line-height: 18px;pointer-events: auto;white-space: nowrap;\"><i style=\"background-attachment: scroll;background-clip: border-box;background-color: rgba(80, 200, 163, 0.6);background-image: none;background-origin: padding-box;background-position-x: 0%;background-position-y: 0%;background-repeat: repeat;background-size: auto;box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;float: left;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: italic;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;height: 18px;line-height: 18px;margin-left: 10px;margin-right: 10px;opacity: 0.7;pointer-events: auto;white-space: nowrap;width: 18px;\"></i>Fair</div>\n<div class=\"box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: normal;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;line-height: 18px;pointer-events: auto;white-space: nowrap;\"><i style=\"background-attachment: scroll;background-clip: border-box;background-color: rgba(235, 235, 54, 0.6);background-image: none;background-origin: padding-box;background-position-x: 0%;background-position-y: 0%;background-repeat: repeat;background-size: auto;box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;float: left;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: italic;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;height: 18px;line-height: 18px;margin-left: 10px;margin-right: 10px;opacity: 0.7;pointer-events: auto;white-space: nowrap;width: 18px;\"></i>Moderate</div>\n<div class=\"box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: normal;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;line-height: 18px;pointer-events: auto;white-space: nowrap;\"><i style=\"background-attachment: scroll;background-clip: border-box;background-color: rgba(255, 79, 92, 0.6);background-image: none;background-origin: padding-box;background-position-x: 0%;background-position-y: 0%;background-repeat: repeat;background-size: auto;box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;float: left;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: italic;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;height: 18px;line-height: 18px;margin-left: 10px;margin-right: 10px;opacity: 0.7;pointer-events: auto;white-space: nowrap;width: 18px;\"></i>Poor</div>\n<div class=\"box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: normal;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;line-height: 18px;pointer-events: auto;white-space: nowrap;\"><i style=\"background-attachment: scroll;background-clip: border-box;background-color: rgba(192, 0, 0, 0.6);background-image: none;background-origin: padding-box;background-position-x: 0%;background-position-y: 0%;background-repeat: repeat;background-size: auto;box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;float: left;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: italic;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;height: 18px;line-height: 18px;margin-left: 10px;margin-right: 10px;opacity: 0.7;pointer-events: auto;white-space: nowrap;width: 18px;\"></i>Very poor</div>\n<div class=\"box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: normal;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;line-height: 18px;pointer-events: auto;white-space: nowrap;\"><i style=\"background-attachment: scroll;background-clip: border-box;background-color: rgba(153, 0, 255,0.6);background-image: none;background-origin: padding-box;background-position-x: 0%;background-position-y: 0%;background-repeat: repeat;background-size: auto;box-sizing: border-box;color: rgb(85, 85, 85);cursor: auto;float: left;font-family: Arial, Helvetica, sans-serif;font-feature-settings: normal;font-kerning: auto;font-language-override: normal;font-optical-sizing: auto;font-size: 14px;font-size-adjust: none;font-stretch: 100%;font-style: italic;font-variant-alternates: normal;font-variant-caps: normal;font-variant-east-asian: normal;font-variant-ligatures: normal;font-variant-numeric: normal;font-variant-position: normal;font-variation-settings: normal;font-weight: 400;height: 18px;line-height: 18px;margin-left: 10px;margin-right: 10px;opacity: 0.7;pointer-events: auto;white-space: nowrap;width: 18px;\"></i>Extremely poor</div>\n</div>\n\n",
        "mode": "html"
      },
      "pluginVersion": "8.5.2",
      "transparent": true,
      "type": "text"
    },
    {
      "datasource": {
        "type": "orion-datasource",
        "uid": "4"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 19,
        "w": 16,
        "x": 8,
        "y": 4
      },
      "id": 4,
      "options": {
        "basemap": {
          "config": {
            "showLabels": true,
            "theme": "auto"
          },
          "name": "Layer 0",
          "type": "carto"
        },
        "controls": {
          "mouseWheelZoom": true,
          "showAttribution": true,
          "showDebug": false,
          "showScale": false,
          "showZoom": true
        },
        "layers": [
          {
            "config": {
              "showLegend": true,
              "style": {
                "color": {
                  "fixed": "#0971b8"
                },
                "opacity": 0.8,
                "rotation": {
                  "fixed": 0,
                  "max": 360,
                  "min": -360,
                  "mode": "clamped"
                },
                "size": {
                  "fixed": 7,
                  "max": 15,
                  "min": 2
                },
                "symbol": {
                  "fixed": "img/icons/marker/circle.svg",
                  "mode": "fixed"
                },
                "text": {
                  "field": "id",
                  "fixed": "",
                  "mode": "fixed"
                },
                "textConfig": {
                  "fontSize": 12,
                  "offsetX": 0,
                  "offsetY": 0,
                  "textAlign": "center",
                  "textBaseline": "middle"
                }
              }
            },
            "location": {
              "latitude": "latitude",
              "longitude": "longitude",
              "mode": "coords"
            },
            "name": "Devices",
            "tooltip": true,
            "type": "markers"
          }
        ],
        "view": {
          "id": "coords",
          "lat": 37.973241,
          "lon": -1.215439,
          "zoom": 14
        }
      },
      "pluginVersion": "8.5.2",
      "targets": [
        {
          "attributes": "All",
          "currentTimeColumn": false,
          "datasource": {
            "type": "orion-datasource",
            "uid": "4"
          },
          "defaultFiwareService": false,
          "enableTypeSearch": false,
          "entityId": "All",
          "entityType": "All",
          "executePostQueryFilter": false,
          "hide": false,
          "invertLocationCoordinates": false,
          "queryFilter": "",
          "refId": "B",
          "selectedRequest": "Entities",
          "service": "$service",
          "servicePath": "$servicepath",
          "target": "select metric",
          "type": "table"
        }
      ],
      "transformations": [
        {
          "id": "extractFields",
          "options": {
            "format": "json",
            "source": "location"
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "greater",
                  "options": {
                    "value": 0
                  }
                },
                "fieldName": "coordinates"
              }
            ],
            "match": "any",
            "type": "exclude"
          }
        },
        {
          "id": "extractFields",
          "options": {
            "format": "json",
            "replace": false,
            "source": "coordinates"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "0": false,
              "H2S": true,
              "NO": true,
              "PM1": true,
              "PM10": true,
              "PM25": true,
              "VOC": true,
              "coordinates": true,
              "dataProvider": true,
              "ica": true,
              "id": true,
              "location": true,
              "operationalStatus": true,
              "particulates": true,
              "pollutants": true,
              "source": true,
              "type 1": true,
              "type 2": true
            },
            "indexByName": {
              "0": 8,
              "1": 9,
              "CO": 3,
              "H2S": 10,
              "NO": 15,
              "NO2": 1,
              "O3": 2,
              "PM1": 11,
              "PM10": 12,
              "PM25": 13,
              "SO2": 4,
              "TimeInstant": 7,
              "VOC": 16,
              "coordinates": 26,
              "dataProvider": 17,
              "humidity": 6,
              "ica": 18,
              "id": 14,
              "location": 19,
              "name": 0,
              "operationalStatus": 21,
              "particulates": 22,
              "pollutants": 23,
              "source": 20,
              "temperature": 5,
              "type 1": 24,
              "type 2": 25
            },
            "renameByName": {
              "0": "longitude",
              "1": "latitude",
              "TimeInstant": "timestamp",
              "operationalStatus": "status"
            }
          }
        },
        {
          "id": "convertFieldType",
          "options": {
            "conversions": [],
            "fields": {}
          }
        }
      ],
      "transparent": true,
      "type": "geomap"
    },
    {
      "datasource": {
        "type": "crate-datasource",
        "uid": "5"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "fillOpacity": 67,
            "lineWidth": 0,
            "spanNulls": 3600000
          },
          "displayName": "NO2",
          "mappings": [
            {
              "options": {
                "from": 0,
                "result": {
                  "index": 0,
                  "text": "GOOD"
                },
                "to": 40
              },
              "type": "range"
            },
            {
              "options": {
                "from": 41,
                "result": {
                  "index": 1,
                  "text": "FAIR"
                },
                "to": 90
              },
              "type": "range"
            },
            {
              "options": {
                "from": 91,
                "result": {
                  "index": 2,
                  "text": "MODERATE"
                },
                "to": 120
              },
              "type": "range"
            },
            {
              "options": {
                "from": 121,
                "result": {
                  "index": 3,
                  "text": "POOR"
                },
                "to": 230
              },
              "type": "range"
            },
            {
              "options": {
                "from": 231,
                "result": {
                  "index": 4,
                  "text": "VERY POOR"
                },
                "to": 340
              },
              "type": "range"
            },
            {
              "options": {
                "from": 340,
                "result": {
                  "index": 5,
                  "text": "EXTREMELY POOR"
                },
                "to": 1000
              },
              "type": "range"
            },
            {
              "options": {
                "from": -100000,
                "result": {
                  "index": 6,
                  "text": "OUT OF RANGE"
                },
                "to": -1
              },
              "type": "range"
            },
            {
              "options": {
                "from": 1001,
                "result": {
                  "index": 7,
                  "text": "OUT OF RANGE"
                },
                "to": 1000000
              },
              "type": "range"
            }
          ],
          "min": 0,
          "noValue": "0",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#7c8996",
                "value": null
              },
              {
                "color": "#00fffa33",
                "value": 0
              },
              {
                "color": "#50c8a333",
                "value": 40
              },
              {
                "color": "#ebeb3633",
                "value": 90
              },
              {
                "color": "#ff4f5c33",
                "value": 120
              },
              {
                "color": "#c0000033",
                "value": 230
              },
              {
                "color": "#9900ff33",
                "value": 340
              },
              {
                "color": "#7c8996",
                "value": 1000
              }
            ]
          },
          "unit": "conμgm3"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 8,
        "x": 0,
        "y": 8
      },
      "id": 6,
      "options": {
        "alignValue": "left",
        "legend": {
          "displayMode": "hidden",
          "placement": "bottom"
        },
        "mergeValues": false,
        "rowHeight": 0.9,
        "showValue": "auto",
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "groupByAliases": [],
          "groupByColumns": [],
          "metricAggs": [
            {
              "$$hashKey": "object:10",
              "column": "value",
              "type": "avg"
            }
          ],
          "query": "SELECT floor(extract('epoch' from time_index) / 3600 ) * 3600000 as time, avg(no2) as \"NO2\" FROM ${table:raw} WHERE time_index >= ? AND time_index <= ? AND entity_id = $device_selected   GROUP BY 1 ORDER BY 1 ASC",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series",
          "whereClauses": []
        }
      ],
      "transparent": true,
      "type": "state-timeline"
    },
    {
      "datasource": {
        "type": "crate-datasource",
        "uid": "5"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "fillOpacity": 67,
            "lineWidth": 0,
            "spanNulls": 3600000
          },
          "mappings": [
            {
              "options": {
                "from": 0,
                "result": {
                  "index": 0,
                  "text": "GOOD"
                },
                "to": 50
              },
              "type": "range"
            },
            {
              "options": {
                "from": 51,
                "result": {
                  "index": 1,
                  "text": "FAIR"
                },
                "to": 100
              },
              "type": "range"
            },
            {
              "options": {
                "from": 101,
                "result": {
                  "index": 2,
                  "text": "MODERATE"
                },
                "to": 130
              },
              "type": "range"
            },
            {
              "options": {
                "from": 131,
                "result": {
                  "index": 3,
                  "text": "POOR"
                },
                "to": 240
              },
              "type": "range"
            },
            {
              "options": {
                "from": 241,
                "result": {
                  "index": 4,
                  "text": "VERY POOR"
                },
                "to": 380
              },
              "type": "range"
            },
            {
              "options": {
                "from": 381,
                "result": {
                  "index": 5,
                  "text": "EXTREMELY POOR"
                },
                "to": 10000
              },
              "type": "range"
            },
            {
              "options": {
                "from": -100000,
                "result": {
                  "index": 6,
                  "text": "OUT OF RANGE"
                },
                "to": -1
              },
              "type": "range"
            },
            {
              "options": {
                "from": 10001,
                "result": {
                  "index": 7,
                  "text": "OUT OF RANGE"
                },
                "to": 1000000
              },
              "type": "range"
            }
          ],
          "min": 0,
          "noValue": "0",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#7c8996",
                "value": null
              },
              {
                "color": "#00fffa33",
                "value": 0
              },
              {
                "color": "#50c8a333",
                "value": 50
              },
              {
                "color": "#ebeb3633",
                "value": 100
              },
              {
                "color": "#ff4f5c33",
                "value": 130
              },
              {
                "color": "#c0000033",
                "value": 240
              },
              {
                "color": "#9900ff33",
                "value": 380
              },
              {
                "color": "#7c8996",
                "value": 10000.0001
              }
            ]
          },
          "unit": "conμgm3"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 8,
        "x": 0,
        "y": 11
      },
      "id": 7,
      "options": {
        "alignValue": "left",
        "legend": {
          "displayMode": "hidden",
          "placement": "bottom"
        },
        "mergeValues": false,
        "rowHeight": 0.9,
        "showValue": "auto",
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "groupByAliases": [],
          "groupByColumns": [],
          "metricAggs": [
            {
              "$$hashKey": "object:10",
              "column": "value",
              "type": "avg"
            }
          ],
          "query": "SELECT timestamp, avg(hour_avg_o3) OVER(ORDER BY timestamp ASC ROWS 7 PRECEDING) as \"O3\" FROM (SELECT date_trunc('hour', time_index) as timestamp, avg(o3) as \"hour_avg_o3\" from ${table:raw} where  time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 and o3 > 0 and o3 < 25000 AND entity_id = $device_selected group by 1 order by 1 ASC) as t",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series",
          "whereClauses": []
        }
      ],
      "transparent": true,
      "type": "state-timeline"
    },
    {
      "datasource": {
        "type": "crate-datasource",
        "uid": "5"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "fillOpacity": 67,
            "lineWidth": 0,
            "spanNulls": 3600000
          },
          "mappings": [
            {
              "options": {
                "from": 0,
                "result": {
                  "index": 0,
                  "text": "GOOD"
                },
                "to": 100
              },
              "type": "range"
            },
            {
              "options": {
                "from": 101,
                "result": {
                  "index": 1,
                  "text": "FAIR"
                },
                "to": 200
              },
              "type": "range"
            },
            {
              "options": {
                "from": 201,
                "result": {
                  "index": 2,
                  "text": "MODERATE"
                },
                "to": 350
              },
              "type": "range"
            },
            {
              "options": {
                "from": 351,
                "result": {
                  "index": 3,
                  "text": "POOR"
                },
                "to": 500
              },
              "type": "range"
            },
            {
              "options": {
                "from": 501,
                "result": {
                  "index": 4,
                  "text": "VERY POOR"
                },
                "to": 750
              },
              "type": "range"
            },
            {
              "options": {
                "from": 751,
                "result": {
                  "index": 5,
                  "text": "EXTREMELY POOR"
                },
                "to": 10000
              },
              "type": "range"
            },
            {
              "options": {
                "from": -100000,
                "result": {
                  "index": 6,
                  "text": "OUT OF RANGE"
                },
                "to": -1
              },
              "type": "range"
            },
            {
              "options": {
                "from": 10001,
                "result": {
                  "index": 7,
                  "text": "OUT OF RANGE"
                },
                "to": 1000000
              },
              "type": "range"
            }
          ],
          "min": 0,
          "noValue": "0",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#7c8996",
                "value": null
              },
              {
                "color": "#00fffa33",
                "value": 0
              },
              {
                "color": "#50c8a333",
                "value": 100
              },
              {
                "color": "#ebeb3633",
                "value": 200
              },
              {
                "color": "#ff4f5c33",
                "value": 350
              },
              {
                "color": "#c0000033",
                "value": 500
              },
              {
                "color": "#9900ff33",
                "value": 750
              },
              {
                "color": "#7c8996",
                "value": 10000
              }
            ]
          },
          "unit": "conμgm3"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 8,
        "x": 0,
        "y": 14
      },
      "id": 9,
      "options": {
        "alignValue": "left",
        "legend": {
          "displayMode": "hidden",
          "placement": "bottom"
        },
        "mergeValues": false,
        "rowHeight": 0.9,
        "showValue": "auto",
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "groupByAliases": [],
          "groupByColumns": [],
          "metricAggs": [
            {
              "$$hashKey": "object:10",
              "column": "value",
              "type": "avg"
            }
          ],
          "query": "SELECT date_trunc('hour', time_index) as time, avg(so2) as \"SO2\" FROM ${table:raw} WHERE time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND entity_id = $device_selected AND so2 >= 0 AND so2 < 1000 GROUP BY time ORDER BY time ASC",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series",
          "whereClauses": []
        }
      ],
      "transparent": true,
      "type": "state-timeline"
    },
    {
      "datasource": {
        "type": "crate-datasource",
        "uid": "5"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "fillOpacity": 67,
            "lineWidth": 0,
            "spanNulls": 3600000
          },
          "mappings": [
            {
              "options": {
                "from": 0,
                "result": {
                  "index": 0,
                  "text": "GOOD"
                },
                "to": 10
              },
              "type": "range"
            },
            {
              "options": {
                "from": 11,
                "result": {
                  "index": 1,
                  "text": "FAIR"
                },
                "to": 20
              },
              "type": "range"
            },
            {
              "options": {
                "from": 21,
                "result": {
                  "index": 2,
                  "text": "MODERATE"
                },
                "to": 25
              },
              "type": "range"
            },
            {
              "options": {
                "from": 26,
                "result": {
                  "index": 3,
                  "text": "POOR"
                },
                "to": 50
              },
              "type": "range"
            },
            {
              "options": {
                "from": 51,
                "result": {
                  "index": 4,
                  "text": "VERY POOR"
                },
                "to": 75
              },
              "type": "range"
            },
            {
              "options": {
                "from": 76,
                "result": {
                  "index": 5,
                  "text": "EXTREMELY POOR"
                },
                "to": 800
              },
              "type": "range"
            },
            {
              "options": {
                "from": -100000,
                "result": {
                  "index": 6,
                  "text": "OUT OF RANGE"
                },
                "to": -1
              },
              "type": "range"
            },
            {
              "options": {
                "from": 801,
                "result": {
                  "index": 7,
                  "text": "OUT OF RANGE"
                },
                "to": 1000000
              },
              "type": "range"
            }
          ],
          "min": 0,
          "noValue": "0",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#7c8996",
                "value": null
              },
              {
                "color": "#00fffa33",
                "value": 0
              },
              {
                "color": "#50c8a333",
                "value": 10
              },
              {
                "color": "#ebeb3633",
                "value": 20
              },
              {
                "color": "#ff4f5c33",
                "value": 25
              },
              {
                "color": "#c0000033",
                "value": 50
              },
              {
                "color": "#9900ff33",
                "value": 75
              },
              {
                "color": "#7c8996",
                "value": 800
              }
            ]
          },
          "unit": "conμgm3"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 8,
        "x": 0,
        "y": 17
      },
      "id": 28,
      "options": {
        "alignValue": "left",
        "legend": {
          "displayMode": "hidden",
          "placement": "bottom"
        },
        "mergeValues": false,
        "rowHeight": 0.9,
        "showValue": "auto",
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "groupByAliases": [],
          "groupByColumns": [],
          "metricAggs": [
            {
              "$$hashKey": "object:10",
              "column": "value",
              "type": "avg"
            }
          ],
          "query": "SELECT timestamp, avg(hour_avg_pm25) OVER(ORDER BY timestamp ASC ROWS 23 PRECEDING) as \"PM2.5\" FROM (SELECT date_trunc('hour', time_index) as timestamp, avg(pm25) as \"hour_avg_pm25\" from ${table:raw} where  time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 and pm25 > 0 and pm25 < 25000 AND entity_id = $device_selected group by 1 order by 1 ASC) as t",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series",
          "whereClauses": []
        }
      ],
      "transparent": true,
      "type": "state-timeline"
    },
    {
      "datasource": {
        "type": "crate-datasource",
        "uid": "5"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "fillOpacity": 67,
            "lineWidth": 0,
            "spanNulls": 3600000
          },
          "mappings": [
            {
              "options": {
                "from": 0,
                "result": {
                  "index": 0,
                  "text": "GOOD"
                },
                "to": 20
              },
              "type": "range"
            },
            {
              "options": {
                "from": 21,
                "result": {
                  "index": 1,
                  "text": "FAIR"
                },
                "to": 40
              },
              "type": "range"
            },
            {
              "options": {
                "from": 41,
                "result": {
                  "index": 2,
                  "text": "MODERATE"
                },
                "to": 50
              },
              "type": "range"
            },
            {
              "options": {
                "from": 51,
                "result": {
                  "index": 3,
                  "text": "POOR"
                },
                "to": 100
              },
              "type": "range"
            },
            {
              "options": {
                "from": 101,
                "result": {
                  "index": 4,
                  "text": "VERY POOR"
                },
                "to": 150
              },
              "type": "range"
            },
            {
              "options": {
                "from": 151,
                "result": {
                  "index": 5,
                  "text": "EXTREMELY POOR"
                },
                "to": 1200
              },
              "type": "range"
            },
            {
              "options": {
                "from": -100000,
                "result": {
                  "index": 6,
                  "text": "OUT OF RANGE"
                },
                "to": -1
              },
              "type": "range"
            },
            {
              "options": {
                "from": 1201,
                "result": {
                  "index": 7,
                  "text": "OUT OF RANGE"
                },
                "to": 1000000
              },
              "type": "range"
            }
          ],
          "min": 0,
          "noValue": "0",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "#7c8996",
                "value": null
              },
              {
                "color": "#00fffa33",
                "value": 0
              },
              {
                "color": "#50c8a333",
                "value": 20
              },
              {
                "color": "#ebeb3633",
                "value": 40
              },
              {
                "color": "#ff4f5c33",
                "value": 50
              },
              {
                "color": "#c0000033",
                "value": 100
              },
              {
                "color": "#9900ff33",
                "value": 150
              },
              {
                "color": "#7c8996",
                "value": 1200
              }
            ]
          },
          "unit": "conμgm3"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 8,
        "x": 0,
        "y": 20
      },
      "id": 30,
      "options": {
        "alignValue": "left",
        "legend": {
          "displayMode": "hidden",
          "placement": "bottom"
        },
        "mergeValues": false,
        "rowHeight": 0.9,
        "showValue": "auto",
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "groupByAliases": [],
          "groupByColumns": [],
          "metricAggs": [
            {
              "$$hashKey": "object:10",
              "column": "value",
              "type": "avg"
            }
          ],
          "query": "SELECT timestamp, avg(hour_avg_pm10) OVER(ORDER BY timestamp ASC ROWS 23 PRECEDING) as \"PM10\" FROM (SELECT date_trunc('hour', time_index) as timestamp, avg(pm10) as \"hour_avg_pm10\" from ${table:raw} where  time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 and pm10 > 0 and pm10 < 25000 AND entity_id = $device_selected group by 1 order by 1 ASC) as t",
          "rawQuery": true,
          "refId": "A",
          "resultFormat": "time_series",
          "whereClauses": []
        }
      ],
      "transparent": true,
      "type": "state-timeline"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 23
      },
      "id": 36,
      "panels": [
        {
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "gridPos": {
            "h": 23,
            "w": 24,
            "x": 0,
            "y": 24
          },
          "id": 38,
          "options": {
            "content": "<style>\n    table {\n        width: 100%;\n    }\n\n.heatMap tr:nth-child(1) { \n  background: #00efe6;\n    color: black;\n    font-weight: 450;  \n}\n.heatMap tr:nth-child(2) { background: #00edaa;\n    color: black;\n    font-weight: 450;  \n}\n.heatMap tr:nth-child(3) { background: #ebeb36; \n    color: black;\n    font-weight: 450;  \n}\n.heatMap tr:nth-child(4) { background: #ff5751; \n    color: black;\n    font-weight: 450;  \n}\n.heatMap tr:nth-child(5) { background: #ad0531; \n    color: white;\n    font-weight: 450;  \n}\n.heatMap tr:nth-child(6) { background: #941283;\n    color: white;\n    font-weight: 450;  \n}\n\n</style>\n\n# Concentration bands and index categories\n\nThe air quality index bands have been established taking into consideration the relative risks associated with short-term exposure to PM2,5, O<sub>3</sub> y NO<sub>2</sub>, as established by the World Health Organisation (3) and in the case of SO<sub>2</sub>, the limit values set out in the EU Air Quality Directive.\n\n<div class=\"heatMap\">\n\n| Index Category            | SO<sub>2</sub>  | O<sub>3</sub> | NO<sub>2</sub>  | PM2,5   | PM10      |\n| --                              | --              | --            | --              | --      | --        |\n| GOOD                           | 0-100           | 0-50          | 0-40            | 0-10    | 0-20      |\n| FAIR           | 101-200         | 51-100        | 41-90           | 11-20   | 21-40     |\n| MODERATE                         | 201-350         | 101-130       | 91-120          | 21-25   | 41-50     |\n| POOR                    | 351-500         | 131-240       | 121-230         | 26-50   | 51-100    |\n| VERY POOR                | 501-750         | 241-380       | 231-340         | 51-75   | 101-150   |\n| EXTREMELY POOR     | 501-750         | 381-800       | 341-1000        | 75-800  | 151-1200  |\n\n</div>\n\n<br>\n\n# Health recommendations\n\nThe air quality index incorporates health recommendations for the general population and for the sensitive population, in line with the health recommendations of the European air quality index. The sensitive population includes both adults and children with respiratory problems and adults with heart conditions.\n\n<div class=\"heatMap\">\n\n| Index Category            | Health messages | At-risk groups  | General population  | \n| --                              | --              | --            | --              | \n| GOOD                           | Satisfactory air quality.           | Enjoy your outdoor activities as normal.          | Enjoy your outdoor activities as normal.            | \n| FAIR            | Acceptable air quality, the pollution does not pose a health risk.         | Enjoy your outdoor activities as normal.        | Enjoy your outdoor activities as normal.           | \n| MODERATE                         | Air quality is unlikely to affect the general population but may present a moderate risk to at-risk groups.         | Consider reducing prolonged and strenuous outdoor activities. People with asthma or respiratory diseases should carefully follow their medication plan. People with heart problems may experience palpitations, difficulty breathing or unusual fatigue.       | Enjoy your outdoor activities as normal. However, watch for symptoms such as coughing, sore throat, shortness of breath, excessive fatigue or palpitations.          | \n| POOR                    | The whole population may experience negative health effects, with risk groups experiencing much more serious effects.         | Consider reducing outdoor activities, and either do them indoors or postpone them to when the air quality is good or reasonably good. Follow the medical treatment plan meticulously.       | Consider reducing prolonged and vigorous outdoor activities, especially if you experience coughing, shortness of breath or throat irritation.         | \n| VERY POOR                | Public health emergency conditions, the entire population may be seriously affected.         | Reduce all outdoor activity, and consider indoor activities or postpone them to when the air quality is good or reasonably good. Follow the medical treatment plan meticulously.       | Reduce all outdoor activities, and consider reducing outdoor activities, and either do them indoors or postpone them to when air quality is good or reasonably good.         | \n| EXTREMELY POOR     | Public health emergency conditions, the entire population may be severely affected.         | Avoid prolonged stay outdoors. Follow the medical treatment plan, if applicable, meticulously, and go to an emergency department if your condition worsens.       | Reduce all outdoor activities and consider doing activities indoors or postpone them to when air quality is good or reasonably good. Use appropriate protection for work that must be done outdoors.        | \n\n</div>\n",
            "mode": "markdown"
          },
          "pluginVersion": "8.5.2",
          "transparent": true,
          "type": "text"
        }
      ],
      "title": "Concentration bands and health recommendations",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 24
      },
      "id": 14,
      "panels": [
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#7c8996"
                  },
                  {
                    "color": "#00fffa33",
                    "value": 0
                  },
                  {
                    "color": "#50c8a333",
                    "value": 40
                  },
                  {
                    "color": "#ebeb3633",
                    "value": 90
                  },
                  {
                    "color": "#ff4f5c33",
                    "value": 120
                  },
                  {
                    "color": "#c0000033",
                    "value": 230
                  },
                  {
                    "color": "#9900ff33",
                    "value": 340
                  },
                  {
                    "color": "#7c8996",
                    "value": 1000
                  }
                ]
              },
              "unit": "conμgm3"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": ".* hourly average"
                },
                "properties": [
                  {
                    "id": "custom.lineWidth",
                    "value": 3
                  },
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "semi-dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 25
          },
          "id": 19,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT date_trunc('hour', time_index) as time, avg(no2) AS \"NO2 hourly average\" FROM ${table:raw} WHERE time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND entity_id = $device_selected AND no2 >= 0 AND no2 < 500 GROUP BY time ORDER BY time ASC",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "whereClauses": []
            }
          ],
          "title": "NO2",
          "transparent": true,
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#7c8996"
                  },
                  {
                    "color": "#00fffa33",
                    "value": 0
                  },
                  {
                    "color": "#50c8a333",
                    "value": 50
                  },
                  {
                    "color": "#ebeb3633",
                    "value": 100
                  },
                  {
                    "color": "#ff4f5c33",
                    "value": 130
                  },
                  {
                    "color": "#c0000033",
                    "value": 240
                  },
                  {
                    "color": "#9900ff33",
                    "value": 380
                  },
                  {
                    "color": "#7c8996",
                    "value": 10000
                  }
                ]
              },
              "unit": "conμgm3"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": ".* average"
                },
                "properties": [
                  {
                    "id": "custom.lineWidth",
                    "value": 3
                  },
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "semi-dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 33
          },
          "id": 15,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT timestamp, avg(hour_avg_o3) OVER(ORDER BY timestamp ASC ROWS 7 PRECEDING) as \"O3 eight-hour moving average\" FROM (SELECT date_trunc('hour', time_index) as timestamp, avg(o3) as \"hour_avg_o3\" from ${table:raw} where  time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 and o3 > 0 and o3 < 25000 AND entity_id = $device_selected group by 1 order by 1 ASC) as t",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "whereClauses": []
            }
          ],
          "title": "O3",
          "transparent": true,
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#7c8996"
                  },
                  {
                    "color": "#00fffa33",
                    "value": 0
                  },
                  {
                    "color": "#50c8a333",
                    "value": 100
                  },
                  {
                    "color": "#ebeb3633",
                    "value": 200
                  },
                  {
                    "color": "#ff4f5c33",
                    "value": 350
                  },
                  {
                    "color": "#c0000033",
                    "value": 500
                  },
                  {
                    "color": "#9900ff33",
                    "value": 750
                  },
                  {
                    "color": "#7c8996",
                    "value": 10000
                  }
                ]
              },
              "unit": "conμgm3"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": ".* hourly average"
                },
                "properties": [
                  {
                    "id": "custom.lineWidth",
                    "value": 3
                  },
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "semi-dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 41
          },
          "id": 16,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT date_trunc('hour', time_index) as time, avg(so2) as \"SO2 hourly average\" FROM ${table:raw} WHERE time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND entity_id = $device_selected AND so2 >= 0 AND so2 < 1000 GROUP BY time ORDER BY time ASC",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "whereClauses": []
            }
          ],
          "title": "SO2",
          "transparent": true,
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#7c8996"
                  },
                  {
                    "color": "#00fffa33",
                    "value": 0
                  },
                  {
                    "color": "#50c8a333",
                    "value": 10
                  },
                  {
                    "color": "#ebeb3633",
                    "value": 20
                  },
                  {
                    "color": "#ff4f5c33",
                    "value": 25
                  },
                  {
                    "color": "#c0000033",
                    "value": 50
                  },
                  {
                    "color": "#9900ff33",
                    "value": 75
                  },
                  {
                    "color": "#7c8996",
                    "value": 1000
                  }
                ]
              },
              "unit": "conμgm3"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": ".* average"
                },
                "properties": [
                  {
                    "id": "custom.lineWidth",
                    "value": 3
                  },
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "semi-dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 49
          },
          "id": 32,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT timestamp, avg(hour_avg_pm25) OVER(ORDER BY timestamp ASC ROWS 23 PRECEDING) as \"PM2.5 24h moving average\" FROM (SELECT date_trunc('hour', time_index) as timestamp, avg(pm25) as \"hour_avg_pm25\" from ${table:raw} where  time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 and pm25 > 0 and pm25 < 25000 AND entity_id = $device_selected group by 1 order by 1 ASC) as t",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "whereClauses": []
            }
          ],
          "title": "PM2.5",
          "transparent": true,
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "#7c8996"
                  },
                  {
                    "color": "#00fffa33",
                    "value": 0
                  },
                  {
                    "color": "#50c8a333",
                    "value": 20
                  },
                  {
                    "color": "#ebeb3633",
                    "value": 40
                  },
                  {
                    "color": "#ff4f5c33",
                    "value": 50
                  },
                  {
                    "color": "#c0000033",
                    "value": 100
                  },
                  {
                    "color": "#9900ff33",
                    "value": 150
                  },
                  {
                    "color": "#7c8996",
                    "value": 1200
                  }
                ]
              },
              "unit": "conμgm3"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byRegexp",
                  "options": ".* average"
                },
                "properties": [
                  {
                    "id": "custom.lineWidth",
                    "value": 3
                  },
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "semi-dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 57
          },
          "id": 34,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT timestamp, avg(hour_avg_pm10) OVER(ORDER BY timestamp ASC ROWS 23 PRECEDING) as \"PM10 24h moving average\" FROM (SELECT date_trunc('hour', time_index) as timestamp, avg(pm10) as \"hour_avg_pm10\" from ${table:raw} where  time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 and pm10 > 0 and pm10 < 25000 AND entity_id = $device_selected group by 1 order by 1 ASC) as t",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "whereClauses": []
            }
          ],
          "title": "PM10",
          "transparent": true,
          "type": "timeseries"
        }
      ],
      "title": "Air Quality Index details",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 25
      },
      "id": 21,
      "panels": [
        {
          "datasource": {
            "type": "crate-datasource",
            "uid": "5"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 2,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "never",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "conμgm3"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 26
          },
          "id": 22,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "table",
              "placement": "right"
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "hide": false,
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT date_trunc('hour', time_index) as time, avg(no2) AS \"NO2 hourly average\" FROM ${table:raw} WHERE time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND entity_id = $device_selected AND no2 >= 0 AND no2 < 500 GROUP BY time ORDER BY time ASC",
              "rawQuery": true,
              "refId": "A",
              "resultFormat": "time_series",
              "whereClauses": []
            },
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "hide": false,
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT timestamp, avg(hour_avg_o3) OVER(ORDER BY timestamp ASC ROWS 7 PRECEDING) as \"O3 eight-hour moving average\" FROM (SELECT date_trunc('hour', time_index) as timestamp, avg(o3) as \"hour_avg_o3\" from ${table:raw} where  time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 and o3 > 0 and o3 < 25000 AND entity_id = $device_selected group by 1 order by 1 ASC) as t",
              "rawQuery": true,
              "refId": "B",
              "resultFormat": "time_series",
              "whereClauses": []
            },
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "hide": false,
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT date_trunc('hour', time_index) as time, avg(so2) as \"SO2 hourly average\" FROM ${table:raw} WHERE time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND entity_id = $device_selected AND so2 >= 0 AND so2 < 1000 GROUP BY time ORDER BY time ASC",
              "rawQuery": true,
              "refId": "C",
              "resultFormat": "time_series",
              "whereClauses": []
            },
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "hide": false,
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT timestamp, avg(hour_avg_pm25) OVER(ORDER BY timestamp ASC ROWS 23 PRECEDING) as \"PM2.5 24h moving average\" FROM (SELECT date_trunc('hour', time_index) as timestamp, avg(pm25) as \"hour_avg_pm25\" from ${table:raw} where  time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 and pm25 > 0 and pm25 < 25000 AND entity_id = $device_selected group by 1 order by 1 ASC) as t",
              "rawQuery": true,
              "refId": "D",
              "resultFormat": "time_series",
              "whereClauses": []
            },
            {
              "datasource": {
                "type": "crate-datasource",
                "uid": "5"
              },
              "groupByAliases": [],
              "groupByColumns": [],
              "hide": false,
              "metricAggs": [
                {
                  "$$hashKey": "object:54",
                  "column": "value",
                  "type": "avg"
                }
              ],
              "query": "SELECT timestamp, avg(hour_avg_pm10) OVER(ORDER BY timestamp ASC ROWS 23 PRECEDING) as \"PM10 24h moving average\" FROM (SELECT date_trunc('hour', time_index) as timestamp, avg(pm10) as \"hour_avg_pm10\" from ${table:raw} where  time_index >= floor(try_cast(? as BIGINT) / 3600000) * 3600000 AND time_index <= floor(try_cast(? as BIGINT) / 3600000) * 3600000 and pm10 > 0 and pm10 < 25000 AND entity_id = $device_selected group by 1 order by 1 ASC) as t",
              "rawQuery": true,
              "refId": "E",
              "resultFormat": "time_series",
              "whereClauses": []
            }
          ],
          "title": "Comparative",
          "transparent": true,
          "type": "timeseries"
        }
      ],
      "title": "Air Quality Index comparative",
      "type": "row"
    }
  ],
  "refresh": false,
  "schemaVersion": 36,
  "style": "dark",
  "tags": [],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "Ayuntamiento",
          "value": "Ayuntamiento"
        },
        "datasource": {
          "type": "orion-datasource",
          "uid": "4"
        },
        "definition": "{\n            \"request\": \"AttributeValue\",\n            \"fiwareScope\": {\n                \"service\": \"$service\",\n                \"servicePath\": \"$servicepath\",\n                \"type\": \"$type\"\n            },\n            \"entityId\": \"All\",\n            \"attributeName\": \"name\",\n            \"queryFilter\": \"ica==true\"\n }",
        "hide": 0,
        "includeAll": false,
        "label": "Device",
        "multi": false,
        "name": "device_name",
        "options": [],
        "query": "{\n            \"request\": \"AttributeValue\",\n            \"fiwareScope\": {\n                \"service\": \"$service\",\n                \"servicePath\": \"$servicepath\",\n                \"type\": \"$type\"\n            },\n            \"entityId\": \"All\",\n            \"attributeName\": \"name\",\n            \"queryFilter\": \"ica==true\"\n }",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      },
      {
        "current": {
          "selected": false,
          "text": "urn:ngsi:AirQualityObserved:HOPac67b2cd2cb6",
          "value": "urn:ngsi:AirQualityObserved:HOPac67b2cd2cb6"
        },
        "datasource": {
          "type": "orion-datasource",
          "uid": "4"
        },
        "definition": "        {\n            \"request\": \"Entities\",\n            \"fiwareScope\": {\n                \"service\": \"$service\",\n                \"servicePath\": \"$servicepath\",\n                \"type\": \"$type\"\n            },\n            \"attributeName\": \"id,name\",\n            \"queryFilter\": \"name=='$device_name'\",\n            \"executePostQueryFilter\": true\n        }",
        "hide": 2,
        "includeAll": false,
        "multi": false,
        "name": "device_selected",
        "options": [],
        "query": "        {\n            \"request\": \"Entities\",\n            \"fiwareScope\": {\n                \"service\": \"$service\",\n                \"servicePath\": \"$servicepath\",\n                \"type\": \"$type\"\n            },\n            \"attributeName\": \"id,name\",\n            \"queryFilter\": \"name=='$device_name'\",\n            \"executePostQueryFilter\": true\n        }",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      },
      {
        "current": {
          "selected": true,
          "text": "AirQuality",
          "value": "AirQuality"
        },
        "description": "",
        "hide": 2,
        "includeAll": false,
        "multi": false,
        "name": "service",
        "options": [
          {
            "selected": true,
            "text": "AirQuality",
            "value": "AirQuality"
          }
        ],
        "query": "AirQuality",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": true,
          "text": "/alcantarilla",
          "value": "/alcantarilla"
        },
        "description": "",
        "hide": 0,
        "includeAll": false,
        "multi": false,
        "name": "servicepath",
        "options": [
          {
            "selected": true,
            "text": "/alcantarilla",
            "value": "/alcantarilla"
          },
          {
            "selected": false,
            "text": "/datasimulator",
            "value": "/datasimulator"
          },
          {
            "selected": false,
            "text": "/demo",
            "value": "/demo"
          }
        ],
        "query": "/alcantarilla,/datasimulator,/demo",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": false,
          "text": "AirQualityObserved",
          "value": "AirQualityObserved"
        },
        "description": "",
        "hide": 2,
        "includeAll": false,
        "multi": false,
        "name": "type",
        "options": [
          {
            "selected": true,
            "text": "AirQualityObserved",
            "value": "AirQualityObserved"
          }
        ],
        "query": "AirQualityObserved",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": false,
          "text": "mtairquality.etairqualityobserved",
          "value": "mtairquality.etairqualityobserved"
        },
        "hide": 2,
        "includeAll": false,
        "multi": false,
        "name": "table",
        "options": [
          {
            "selected": true,
            "text": "mtairquality.etairqualityobserved",
            "value": "mtairquality.etairqualityobserved"
          }
        ],
        "query": "mtairquality.etairqualityobserved",
        "skipUrlSync": false,
        "type": "custom"
      }
    ]
  },
  "time": {
    "from": "now-2d",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "",
  "title": "Air Qyuality Index (ICA)",
  "uid": "aqapp-ica",
  "version": 7,
  "weekStart": ""
}